"use strict";(self.webpackChunkyv_app=self.webpackChunkyv_app||[]).push([[366],{366:(F,f,l)=>{l.r(f),l.d(f,{ProfileComponent:()=>S});var p=l(5694),o=l(4440),e=l(7944),v=l(5524),g=l(5567);function _(r,m){1&r&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1," Name is required "),e.\u0275\u0275elementEnd())}function h(r,m){1&r&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1," Please enter a valid email "),e.\u0275\u0275elementEnd())}function P(r,m){1&r&&e.\u0275\u0275element(0,"span",42)}function w(r,m){1&r&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1," Current password is required "),e.\u0275\u0275elementEnd())}function b(r,m){1&r&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1," Password must be at least 8 characters "),e.\u0275\u0275elementEnd())}function E(r,m){1&r&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1," Passwords do not match "),e.\u0275\u0275elementEnd())}function C(r,m){1&r&&e.\u0275\u0275element(0,"span",42)}let S=(()=>{class r{fb;authService;notificationService;profileForm;passwordForm;currentUser;profileImageUrl=null;isSaving=!1;isChangingPassword=!1;constructor(n,i,t){this.fb=n,this.authService=i,this.notificationService=t}ngOnInit(){this.initForms(),this.authService.currentUser$.subscribe(n=>{n&&(this.currentUser=n,this.profileImageUrl=n.profileImage||null,this.updateFormValues(n))})}initForms(){this.profileForm=this.fb.group({name:["",o.Validators.required],email:["",[o.Validators.required,o.Validators.email]],phone:[""],bio:[""]}),this.passwordForm=this.fb.group({currentPassword:["",o.Validators.required],newPassword:["",[o.Validators.required,o.Validators.minLength(8)]],confirmPassword:["",o.Validators.required]},{validators:this.passwordMatchValidator})}updateFormValues(n){this.profileForm.patchValue({name:n.name,email:n.email,phone:n.phone||"",bio:n.bio||""})}passwordMatchValidator(n){const i=n.get("newPassword")?.value,t=n.get("confirmPassword")?.value;return i===t?null:{mismatch:!0}}triggerFileInput(){document.querySelector('input[type="file"]').click()}onFileSelected(n){const i=n.target;if(i.files&&i.files.length){const t=i.files[0],a=new FileReader;a.onload=()=>{this.profileImageUrl=a.result},a.readAsDataURL(t),this.uploadProfileImage(t)}}uploadProfileImage(n){setTimeout(()=>{this.notificationService.success("Profile image updated successfully")},1500)}onSubmit(){this.profileForm.invalid||(this.isSaving=!0,setTimeout(()=>{this.isSaving=!1,this.notificationService.success("Profile updated successfully")},1500))}onPasswordChange(){this.passwordForm.invalid||(this.isChangingPassword=!0,setTimeout(()=>{this.isChangingPassword=!1,this.passwordForm.reset(),this.notificationService.success("Password changed successfully")},1500))}static \u0275fac=function(i){return new(i||r)(e.\u0275\u0275directiveInject(o.FormBuilder),e.\u0275\u0275directiveInject(v.u),e.\u0275\u0275directiveInject(g.J))};static \u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-profile"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:74,vars:18,consts:[["fileInput",""],[1,"container"],[1,"row"],[1,"col-md-4"],[1,"card","profile-card"],[1,"card-body","text-center"],[1,"avatar-container","mb-3"],["alt","Profile Image",1,"rounded-circle","profile-image",3,"src"],[1,"btn","btn-sm","btn-primary","change-photo-btn",3,"click"],[1,"bi","bi-camera"],["type","file","hidden","","accept","image/*",3,"change"],[1,"card-title"],[1,"card-text","text-muted"],[1,"card-text"],[1,"badge","bg-primary"],[1,"text-muted"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","bio",1,"form-label"],["id","bio","rows","3","formControlName","bio",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"card","mt-4"],["for","currentPassword",1,"form-label"],["type","password","id","currentPassword","formControlName","currentPassword",1,"form-control"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(i,t){if(1&i){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e.\u0275\u0275element(6,"img",7),e.\u0275\u0275elementStart(7,"button",8),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(t.triggerFileInput())}),e.\u0275\u0275element(8,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"input",10,0),e.\u0275\u0275listener("change",function(d){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(t.onFileSelected(d))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"h4",11),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",12),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",13)(16,"span",14),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"p",13)(19,"small",15),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"date"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(22,"div",16)(23,"div",17)(24,"div",18)(25,"h5",19),e.\u0275\u0275text(26,"Profile Information"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",20)(28,"form",21),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(t.onSubmit())}),e.\u0275\u0275elementStart(29,"div",22)(30,"label",23),e.\u0275\u0275text(31,"Full Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"input",24),e.\u0275\u0275template(33,_,2,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",22)(35,"label",26),e.\u0275\u0275text(36,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"input",27),e.\u0275\u0275template(38,h,2,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",22)(40,"label",28),e.\u0275\u0275text(41,"Phone Number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",22)(44,"label",30),e.\u0275\u0275text(45,"Bio"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(46,"textarea",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"button",32),e.\u0275\u0275template(48,P,1,0,"span",33),e.\u0275\u0275text(49," Save Changes "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(50,"div",34)(51,"div",18)(52,"h5",19),e.\u0275\u0275text(53,"Change Password"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",20)(55,"form",21),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275resetView(t.onPasswordChange())}),e.\u0275\u0275elementStart(56,"div",22)(57,"label",35),e.\u0275\u0275text(58,"Current Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(59,"input",36),e.\u0275\u0275template(60,w,2,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"div",22)(62,"label",37),e.\u0275\u0275text(63,"New Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(64,"input",38),e.\u0275\u0275template(65,b,2,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",22)(67,"label",39),e.\u0275\u0275text(68,"Confirm New Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(69,"input",40),e.\u0275\u0275template(70,E,2,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"button",32),e.\u0275\u0275template(72,C,1,0,"span",33),e.\u0275\u0275text(73," Update Password "),e.\u0275\u0275elementEnd()()()()()()()}if(2&i){let a,s,d,u,c;e.\u0275\u0275advance(6),e.\u0275\u0275property("src",t.profileImageUrl||"assets/images/default-avatar.png",e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.currentUser?null:t.currentUser.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t.currentUser?null:t.currentUser.email),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==t.currentUser?null:t.currentUser.role),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("Member since: ",e.\u0275\u0275pipeBind1(21,16,null==t.currentUser?null:t.currentUser.createdAt),""),e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",t.profileForm),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(a=t.profileForm.get("name"))?null:a.invalid)&&(null==(a=t.profileForm.get("name"))?null:a.touched)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(s=t.profileForm.get("email"))?null:s.invalid)&&(null==(s=t.profileForm.get("email"))?null:s.touched)),e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",t.profileForm.invalid||t.isSaving),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isSaving),e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",t.passwordForm),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(d=t.passwordForm.get("currentPassword"))?null:d.invalid)&&(null==(d=t.passwordForm.get("currentPassword"))?null:d.touched)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(u=t.passwordForm.get("newPassword"))?null:u.invalid)&&(null==(u=t.passwordForm.get("newPassword"))?null:u.touched)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",(null==(c=t.passwordForm.get("confirmPassword"))?null:c.invalid)&&(null==(c=t.passwordForm.get("confirmPassword"))?null:c.touched)),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",t.passwordForm.invalid||t.isChangingPassword),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isChangingPassword)}},dependencies:[p.CommonModule,p.NgIf,p.DatePipe,o.ReactiveFormsModule,o.\u0275NgNoValidate,o.DefaultValueAccessor,o.NgControlStatus,o.NgControlStatusGroup,o.FormGroupDirective,o.FormControlName],styles:[".profile-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.avatar-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.profile-image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover;border:3px solid var(--bs-primary)}.change-photo-btn[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;border-radius:50%;width:36px;height:36px;padding:0;display:flex;align-items:center;justify-content:center}"]})}return r})()}}]);