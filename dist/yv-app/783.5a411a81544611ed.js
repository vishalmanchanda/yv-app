"use strict";(self.webpackChunkyv_app=self.webpackChunkyv_app||[]).push([[783],{2783:(j,u,s)=>{s.r(u),s.d(u,{SettingsComponent:()=>A});var g=s(5694),l=s(4440),e=s(7944),S=s(4412),v=s(1985);const c={darkMode:!1,language:"en",notifications:!0,sidebarExpanded:!0,fontSize:"medium",colorTheme:"default"};var p=s(8141),f=s(1626),h=s(2154),b=s(5524);let x=(()=>{class i{http;configService;authService;settingsSubject=new S.t(c);settings$=this.settingsSubject.asObservable();constructor(n,o,t){this.http=n,this.configService=o,this.authService=t,this.loadSettings(),this.authService.currentUser$.subscribe(a=>{a?this.loadSettings():this.resetToDefaults()})}loadSettings(){const n=this.authService.getCurrentUserId();if(!n)return void this.loadFromLocalStorage();const o=this.configService.getConfig().apiUrl;this.http.get(`${o}/users/${n}/settings`).pipe((0,p.M)({error:()=>this.loadFromLocalStorage()})).subscribe(t=>{this.settingsSubject.next(t),localStorage.setItem("userSettings",JSON.stringify(t))})}loadFromLocalStorage(){const n=localStorage.getItem("userSettings");if(n)try{const o=JSON.parse(n);this.settingsSubject.next({...c,...o})}catch{this.settingsSubject.next(c)}else this.settingsSubject.next(c)}updateSettings(n){const t={...this.settingsSubject.value,...n},a=this.authService.getCurrentUserId();if(!a)return this.settingsSubject.next(t),localStorage.setItem("userSettings",JSON.stringify(t)),new v.c(m=>{m.next(t),m.complete()});const d=this.configService.getConfig().apiUrl;return this.http.patch(`${d}/users/${a}/settings`,n).pipe((0,p.M)(m=>{this.settingsSubject.next(m),localStorage.setItem("userSettings",JSON.stringify(m))}))}resetToDefaults(){this.settingsSubject.next(c),localStorage.removeItem("userSettings");const n=this.authService.getCurrentUserId();if(n){const o=this.configService.getConfig().apiUrl;this.http.delete(`${o}/users/${n}/settings/reset`).subscribe()}}static \u0275fac=function(o){return new(o||i)(e.\u0275\u0275inject(f.Qq),e.\u0275\u0275inject(h.w),e.\u0275\u0275inject(b.u))};static \u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _=s(5567),C=s(4081);function y(i,r){1&i&&e.\u0275\u0275element(0,"span",20)}function k(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275listener("click",function(){const t=e.\u0275\u0275restoreView(n).$implicit,a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.settings.colorTheme=t.value)}),e.\u0275\u0275elementEnd()}if(2&i){const n=r.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275styleProp("background-color",n.color),e.\u0275\u0275classProp("active",o.settings.colorTheme===n.value)}}function M(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",21)(2,"h6"),e.\u0275\u0275text(3,"Theme Mode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",22)(5,"input",23),e.\u0275\u0275twoWayListener("ngModelChange",function(t){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.settings.darkMode,t)||(a.settings.darkMode=t),e.\u0275\u0275resetView(t)}),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(n);const t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(t.onDarkModeChange())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"label",24),e.\u0275\u0275text(7," Dark Mode "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",21)(9,"h6"),e.\u0275\u0275text(10,"Color Theme"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",25),e.\u0275\u0275template(12,k,1,4,"div",26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",21)(14,"h6"),e.\u0275\u0275text(15,"Sidebar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",22)(17,"input",27),e.\u0275\u0275twoWayListener("ngModelChange",function(t){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.settings.sidebarExpanded,t)||(a.settings.sidebarExpanded=t),e.\u0275\u0275resetView(t)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"label",28),e.\u0275\u0275text(19," Expanded by default "),e.\u0275\u0275elementEnd()()()()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275twoWayProperty("ngModel",n.settings.darkMode),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",n.colorThemes),e.\u0275\u0275advance(5),e.\u0275\u0275twoWayProperty("ngModel",n.settings.sidebarExpanded)}}function E(i,r){1&i&&(e.\u0275\u0275elementStart(0,"div",34)(1,"h6"),e.\u0275\u0275text(2,"Notification Types"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",35),e.\u0275\u0275element(4,"input",36),e.\u0275\u0275elementStart(5,"label",37),e.\u0275\u0275text(6," System Updates "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",35),e.\u0275\u0275element(8,"input",38),e.\u0275\u0275elementStart(9,"label",39),e.\u0275\u0275text(10," New Messages "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",35),e.\u0275\u0275element(12,"input",40),e.\u0275\u0275elementStart(13,"label",41),e.\u0275\u0275text(14," System Alerts "),e.\u0275\u0275elementEnd()()())}function T(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",30)(2,"input",31),e.\u0275\u0275twoWayListener("ngModelChange",function(t){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.settings.notifications,t)||(a.settings.notifications=t),e.\u0275\u0275resetView(t)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",32),e.\u0275\u0275text(4," Enable Notifications "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,E,15,0,"div",33),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275twoWayProperty("ngModel",n.settings.notifications),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.settings.notifications)}}function w(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",34)(2,"label",42),e.\u0275\u0275text(3,"Display Language"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",43),e.\u0275\u0275twoWayListener("ngModelChange",function(t){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.settings.language,t)||(a.settings.language=t),e.\u0275\u0275resetView(t)}),e.\u0275\u0275elementStart(5,"option",44),e.\u0275\u0275text(6,"English"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",45),e.\u0275\u0275text(8,"Espa\xf1ol"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",46),e.\u0275\u0275text(10,"Fran\xe7ais"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"option",47),e.\u0275\u0275text(12,"Deutsch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"option",48),e.\u0275\u0275text(14,"\u65e5\u672c\u8a9e"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",34)(16,"label",49),e.\u0275\u0275text(17,"Date Format"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"select",50)(19,"option",51),e.\u0275\u0275text(20,"MM/DD/YYYY"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",52),e.\u0275\u0275text(22,"DD/MM/YYYY"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",53),e.\u0275\u0275text(24,"YYYY-MM-DD"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",34)(26,"label",54),e.\u0275\u0275text(27,"Time Format"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"select",55)(29,"option",56),e.\u0275\u0275text(30,"12-hour (AM/PM)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"option",57),e.\u0275\u0275text(32,"24-hour"),e.\u0275\u0275elementEnd()()()()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",n.settings.language)}}function D(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",34)(2,"label",58),e.\u0275\u0275text(3,"Font Size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",59),e.\u0275\u0275twoWayListener("ngModelChange",function(t){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(a.settings.fontSize,t)||(a.settings.fontSize=t),e.\u0275\u0275resetView(t)}),e.\u0275\u0275elementStart(5,"option",60),e.\u0275\u0275text(6,"Small"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"option",61),e.\u0275\u0275text(8,"Medium"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"option",62),e.\u0275\u0275text(10,"Large"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"div",34)(12,"div",22),e.\u0275\u0275element(13,"input",63),e.\u0275\u0275elementStart(14,"label",64),e.\u0275\u0275text(15," High Contrast Mode "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",34)(17,"div",22),e.\u0275\u0275element(18,"input",65),e.\u0275\u0275elementStart(19,"label",66),e.\u0275\u0275text(20," Reduce Motion "),e.\u0275\u0275elementEnd()()()()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",n.settings.fontSize)}}function I(i,r){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",34)(2,"div",22),e.\u0275\u0275element(3,"input",67),e.\u0275\u0275elementStart(4,"label",68),e.\u0275\u0275text(5," Enable Analytics "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"small",69),e.\u0275\u0275text(7," Allow us to collect anonymous usage data to improve the application. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",34)(9,"button",70),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(t.clearCache())}),e.\u0275\u0275text(10," Clear Application Cache "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",34)(12,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(t.exportData())}),e.\u0275\u0275text(13," Export My Data "),e.\u0275\u0275elementEnd()()()}}let A=(()=>{class i{userSettingsService;notificationService;themeService;settings={darkMode:!1,language:"en",notifications:!0,sidebarExpanded:!0,fontSize:"medium",colorTheme:"default"};originalSettings={...this.settings};activeSection="appearance";isSaving=!1;colorThemes=[{name:"Default",value:"default",color:"#0d6efd"},{name:"Green",value:"green",color:"#198754"},{name:"Purple",value:"purple",color:"#6f42c1"},{name:"Orange",value:"orange",color:"#fd7e14"},{name:"Teal",value:"teal",color:"#20c997"}];constructor(n,o,t){this.userSettingsService=n,this.notificationService=o,this.themeService=t}ngOnInit(){this.userSettingsService.settings$.subscribe(n=>{this.settings={...n},this.originalSettings={...n}})}setActiveSection(n){this.activeSection=n}getSectionTitle(){switch(this.activeSection){case"appearance":return"Appearance Settings";case"notifications":return"Notification Preferences";case"language":return"Language & Localization";case"accessibility":return"Accessibility Options";case"advanced":return"Advanced Settings";default:return"Settings"}}onDarkModeChange(){this.themeService.setTheme(!!this.settings.darkMode)}saveSettings(){this.isSaving=!0,this.userSettingsService.updateSettings(this.settings).subscribe({next:()=>{this.isSaving=!1,this.originalSettings={...this.settings},this.notificationService.success("Settings saved successfully")},error:n=>{this.isSaving=!1,this.notificationService.error("Failed to save settings"),console.error("Settings save error:",n)}})}resetSettings(){confirm("Are you sure you want to reset all settings to default values?")&&(this.userSettingsService.resetToDefaults(),this.notificationService.success("Settings reset to defaults"))}clearCache(){setTimeout(()=>{this.notificationService.success("Application cache cleared")},1e3)}exportData(){setTimeout(()=>{const o=JSON.stringify({user:{name:"John Doe",email:"john@example.com"},settings:this.settings},null,2),t="data:application/json;charset=utf-8,"+encodeURIComponent(o),d=document.createElement("a");d.setAttribute("href",t),d.setAttribute("download","user-data.json"),d.click(),this.notificationService.success("Data exported successfully")},1e3)}static \u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(x),e.\u0275\u0275directiveInject(_.J),e.\u0275\u0275directiveInject(C.F))};static \u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-settings"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:36,vars:18,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"list-group","settings-nav"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"bi","bi-palette","me-2"],[1,"bi","bi-bell","me-2"],[1,"bi","bi-translate","me-2"],[1,"bi","bi-person-badge","me-2"],[1,"bi","bi-gear","me-2"],[1,"mt-4"],[1,"btn","btn-outline-danger","w-100",3,"click"],[1,"col-md-9"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"card-body"],[4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"mb-4"],[1,"form-check","form-switch"],["type","checkbox","id","darkModeToggle",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","darkModeToggle",1,"form-check-label"],[1,"d-flex","flex-wrap","gap-2"],["class","color-theme-option",3,"active","backgroundColor","click",4,"ngFor","ngForOf"],["type","checkbox","id","sidebarToggle",1,"form-check-input",3,"ngModelChange","ngModel"],["for","sidebarToggle",1,"form-check-label"],[1,"color-theme-option",3,"click"],[1,"form-check","form-switch","mb-3"],["type","checkbox","id","enableNotifications",1,"form-check-input",3,"ngModelChange","ngModel"],["for","enableNotifications",1,"form-check-label"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-check","mb-2"],["type","checkbox","id","notifyUpdates","checked","",1,"form-check-input"],["for","notifyUpdates",1,"form-check-label"],["type","checkbox","id","notifyMessages","checked","",1,"form-check-input"],["for","notifyMessages",1,"form-check-label"],["type","checkbox","id","notifyAlerts","checked","",1,"form-check-input"],["for","notifyAlerts",1,"form-check-label"],["for","languageSelect",1,"form-label"],["id","languageSelect",1,"form-select",3,"ngModelChange","ngModel"],["value","en"],["value","es"],["value","fr"],["value","de"],["value","ja"],["for","dateFormatSelect",1,"form-label"],["id","dateFormatSelect",1,"form-select"],["value","MM/DD/YYYY"],["value","DD/MM/YYYY"],["value","YYYY-MM-DD"],["for","timeFormatSelect",1,"form-label"],["id","timeFormatSelect",1,"form-select"],["value","12"],["value","24"],["for","fontSizeSelect",1,"form-label"],["id","fontSizeSelect",1,"form-select",3,"ngModelChange","ngModel"],["value","small"],["value","medium"],["value","large"],["type","checkbox","id","highContrastToggle",1,"form-check-input"],["for","highContrastToggle",1,"form-check-label"],["type","checkbox","id","reduceMotionToggle",1,"form-check-input"],["for","reduceMotionToggle",1,"form-check-label"],["type","checkbox","id","enableAnalyticsToggle",1,"form-check-input"],["for","enableAnalyticsToggle",1,"form-check-label"],[1,"text-muted"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(o,t){1&o&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e.\u0275\u0275listener("click",function(){return t.setActiveSection("appearance")}),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275text(6," Appearance "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"a",4),e.\u0275\u0275listener("click",function(){return t.setActiveSection("notifications")}),e.\u0275\u0275element(8,"i",6),e.\u0275\u0275text(9," Notifications "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"a",4),e.\u0275\u0275listener("click",function(){return t.setActiveSection("language")}),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275text(12," Language "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"a",4),e.\u0275\u0275listener("click",function(){return t.setActiveSection("accessibility")}),e.\u0275\u0275element(14,"i",8),e.\u0275\u0275text(15," Accessibility "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"a",4),e.\u0275\u0275listener("click",function(){return t.setActiveSection("advanced")}),e.\u0275\u0275element(17,"i",9),e.\u0275\u0275text(18," Advanced "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",10)(20,"button",11),e.\u0275\u0275listener("click",function(){return t.resetSettings()}),e.\u0275\u0275text(21," Reset to Defaults "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",12)(23,"div",13)(24,"div",14)(25,"h5",15),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"button",16),e.\u0275\u0275listener("click",function(){return t.saveSettings()}),e.\u0275\u0275template(28,y,1,0,"span",17),e.\u0275\u0275text(29," Save Changes "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",18),e.\u0275\u0275template(31,M,20,3,"div",19)(32,T,6,2,"div",19)(33,w,33,1,"div",19)(34,D,21,1,"div",19)(35,I,14,0,"div",19),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275advance(4),e.\u0275\u0275classProp("active","appearance"===t.activeSection),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active","notifications"===t.activeSection),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active","language"===t.activeSection),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active","accessibility"===t.activeSection),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active","advanced"===t.activeSection),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(t.getSectionTitle()),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",t.isSaving),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",t.isSaving),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","appearance"===t.activeSection),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","notifications"===t.activeSection),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","language"===t.activeSection),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","accessibility"===t.activeSection),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","advanced"===t.activeSection))},dependencies:[g.CommonModule,g.NgForOf,g.NgIf,l.FormsModule,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.CheckboxControlValueAccessor,l.SelectControlValueAccessor,l.NgControlStatus,l.NgModel],styles:[".settings-nav[_ngcontent-%COMP%]{position:sticky;top:1rem}.color-theme-option[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;cursor:pointer;transition:all .2s;border:2px solid transparent}.color-theme-option.active[_ngcontent-%COMP%]{border-color:var(--bs-primary);transform:scale(1.1)}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})()}}]);